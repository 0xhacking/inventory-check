<div class="landing-page">
  <div class="cta row" ng-controller="LicensesCtrl" ng-show="isAdmin()">
    <section class="packages col-sm-6 col-md-3">
      <h3 class="packages-name" ng-bind-html="packageInfo.name"></h3>
      <progressbar ng-if="packageInfo.termMax>0" max="packageInfo.termMax" value="packageInfo.termUsed" type="{{getTrialProgress(packageInfo)}}"></progressbar>
      <p class="packages-days-left" ng-if="packageInfo.termRemaining>0 && isOnTrial()">{{packageInfo.termRemaining}} {{packageInfo.termUnits}} left in your trial</p>
      <p class="packages-unlimited" ng-if="packageInfo.termRemaining===0 && isOnTrial()===false">Unlimited use</p>
      <button class="btn btn-sm btn-default fix-btn-pos">Buy / Upgrade</button>
    </section>
    <section class="devices col-sm-6 col-md-3" ng-controller="DevicesCtrl">
      <h3>Devices</h3>
      <ul class="device-list">
        <li ng-repeat="device in devices" class="device-item"><span class="number">{{device.qty}}</span><span class="model">{{device.model}}</span></li>
      </ul>
      <button class="btn btn-sm btn-default fix-btn-pos">Order More</button>
    </section>
    <div class="col-md-6">
      <div class="row">
        <section class="licenses col-sm-6">
          <h3 class="licenses-bought" ng-if="licenses.total!==0">{{licenses.total}} Licenses</h3>
          <progressbar ng-if="licenses.total>0" max="licenses.total" value="licenses.used > licenses.total ? licenses.total : licenses.used" type="{{getLicenseProgress(licenses)}}"></progressbar>
          <p class="licenses-left" ng-if="isOnTrial() && licenses.total>0">{{getUnusedLicense(licenses)}}</p>
          <p class="licenses-used" ng-if="isOnTrial()===false">{{licenses.used}} used</p>
          <button class="btn btn-sm btn-default fix-btn-pos">Remind</button>
          <button class="btn btn-sm btn-default fix-btn-pos">Buy More</button>
        </section>
        <section class="unlicensed-users col-sm-6">
          <div ng-if="isDomainClaimed()">
            <div class="users-info">
              <span class="number">{{licenses.unlicensed}}</span>
              <span class="text">unlicensed users registered on</span>
            </div>
            <h3>{{licenses.domain}}</h3>
          </div>
          <div class="unlicensed-users-unclaimeddomain" ng-if="isDomainClaimed()===false">
            <h3>{{licenses.unlicensed}} Unlicensed Users</h3>
            <p>View and convert users currently using the free version</p>
          </div>
          <button id="convertButton" class="btn btn-sm btn-default fix-btn-pos" translate="homePage.convert" ng-click="openConvertModal()" ng-disabled="licenses.unlicensed === 0"></button>
        </section>
      </div>
    </div>
  </div>
  <div class="landing-content row">
    <section class="analytics-charts col-md-9">

      <div class="trialTitle">
        <span translate="homePage.activity"></span><span ng-click="reloadReports(false)" class="overview-updated" id="time-click-div">:
        <cr-reload-data id="homeRefreshData" last-updated-time="refreshTime"></cr-reload-data>
        </span>
      </div>


      <section class="tab-reports background-white">
        <cs-tabset justified="true" class="largetabs">
          <cs-tab select="resizeCallsChart()">
            <cs-tab-heading>
              <span translate="homePage.calls"></span>
              <div class="total">{{counts.calls}}</div>
            </cs-tab-heading>
            <div id="callsChart" class="tab-report"></div>
            <div id="callsRefreshDiv" class="report-status">
              <i class='icon icon-spinner icon-2x' ng-show="isRefresh('calls')"></i>
            </div>
          </cs-tab>
          <cs-tab select="resizeConversationsChart()">
            <cs-tab-heading>
              <span translate="homePage.conversations"></span>
              <div class="total">{{counts.conversations}}</div>
            </cs-tab-heading>
            <div id="conversationsChart" class="tab-report"></div>
            <div id="convRefreshDiv" class="report-status">
              <i class='icon icon-spinner icon-2x' ng-if="isRefresh('conversations')"></i>
            </div>
          </cs-tab>
          <cs-tab select="resizeContentSharedChart()">
            <cs-tab-heading>
              <span translate="homePage.contentShared"></span>
              <div class="total">{{counts.contentShared}}</div>
            </cs-tab-heading>
            <div id="contentSharedChart" class="tab-report"></div>
            <div id="contentRefreshDiv" class="report-status">
              <i class='icon icon-spinner icon-2x' ng-if="isRefresh('contentShared')"></i>
            </div>
          </cs-tab>
        </cs-tabset>
      </section>
    </section>

    <div class="widgets col-md-3">
      <div class="row">
        <!-- TODO: To be removed when monitoring service is refactored-->
        <section class="monitoring-panel col-sm-4 col-md-12">
          <h4 class="monitoring-section" translate="homePage.monitoring"></h4>
          <div ng-repeat="health in healthMetrics">
            <a ng-href="{{statusPageUrl}}" target="_blank">
              <div ng-class="{true:'green', false:'red'}[health.status==='operational']" class="monitoring-cell" id="{{health.name}}">
                <i class="fa fa-circle"></i>&nbsp;&nbsp;<span>{{health.name}}</span>
              </div>
            </a>
          </div>
          <hercules-status></hercules-status>
        </section>

        <!-- TODO: Replacement for when monitoring service is refactored
        <section class="monitoring-panel col-sm-4 col-md-12">
          <h4 translate="homePage.monitoring">Monitoring</h4>
          <ul class="monitoring-list">
            <li class="monitoring-sections" ng-repeat="section in healthMetricsSections" ng-click="isCollapsed = !isCollapsed">
              <a href ng-class="{true:'green', false:'red'}[section.status==='operational']">
                <i class="fa fa-circle"></i><span>{{section.name}}</span>
              </a>
              <ul class="health-metrics" collapse="isCollapsed">
                <li id="{{health.name}}" class="monitoring-cell"ng-repeat="health in section.healthMetrics">
                  <a ng-href="{{statusPageUrl}}"  ng-class="{true:'green', false:'red'}[health.status==='operational']" target="_blank">
                    <i class="fa fa-circle"></i><span>{{health.name}}</span>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </section> -->
        <section class="help col-sm-4 col-md-12" ng-controller="SupportCtrl">
          <h4>Need Help?</h4>
          <p class="no-cases">There are no open cases</p>
          <button class="btn btn-sm btn-default">Open a Case</button>
        </section>
        <section class="quick-links col-sm-4 col-md-12" ng-controller="QuikLinksCtrl">
          <h4>Quick Links</h4>
          <div class="list-group">

            <a id="addUserQuickLink" href="" ui-sref="users.list({ showAddUsers: 'add' })" ng-if="isPageActive('users')" class="list-group-item">Add Users</a>
            <a id="installDeviceQuickLink" ng-if="false" class="list-group-item">Install a Device for a User</a>
            <a id="installDeviceSharedSpaceQuickLink" ui-sref="devices" ng-if="isPageActive('devices')" class="list-group-item">Install a Devices into a Shared Space</a>
            <a id="autoAttendantQuickLink" ng-if="false" class="list-group-item">Configure an Auto Attendant</a>
            <a id="deviceLogsQuickLink" ui-sref="support" ng-if="isPageActive('support')" class="list-group-item">Search device logs</a>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
