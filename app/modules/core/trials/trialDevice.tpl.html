<!-- Call Trial Modal -->

<!-- header -->
<div class="modal-header">
  <button type="button" class="close" ng-click="$dismiss()">
    <span class="sr-only" translate="common.close"></span>
  </button>
  <h3 class="modal-title" translate="trialModal.call.title"></h3>
</div>

<!-- body -->
<section class="modal-body">
  <form id="callTrialForm" class="form-horizontal trial-modal" name="trialForm" novalidate>
  <section class="modal-body-gray row" ng-if="callTrial.limitReached && !callTrial.canAddMoreDevices">
    <h5 translate="trialModal.call.deviceTrialCapacityHeader"></h5>
    <div ng-if="callTrial.limitsError">
      <div class="medium-12 columns" translate="trialModal.call.deviceTrialUnavailable"></div>
    </div>
    <!-- TODO: Add tooltip when toolkit allows localized strings to contain the directive markup -->
    <div ng-if="!callTrial.limitsError">
      <div class="medium-12 columns"
        translate="trialModal.call.deviceTrialLimitReached"
        translate-values="{number: callTrial.maxTrials}">
      </div>
      <div class="pad-top"></div>
      <div class="medium-12 columns pad-top" translate="trialModal.call.deviceTrialLimitHelp"></div>
    </div>
  </section>

  <section class="modal-body-gray" ng-if="callTrial.canAddMoreDevices || !callTrial.limitReached">
    <section class="collapse-fields">
      <h5 translate="trialModal.call.selectDevicesHeader"></h5>
      <section class="row">
        <div class="small-12 columns" translate="trialModal.call.deviceLimitDescription"></div>
        <h6 class="small-12 columns" translate="trialModal.call.meetingRoomCamera"></h6>
        <formly-form class="small-12 columns" model="callTrial.details.roomSystems"
          fields="callTrial.roomSystemFields" hide-directive="ng-show">
        </formly-form>
      </section>
      <section class="row">
        <h6 class="small-12 columns" translate="trialModal.call.deskPhones"></h6>
        <formly-form class="small-12 columns" model="callTrial.details.phones"
          fields="callTrial.deskPhoneFields" hide-directive="ng-show">
        </formly-form>
      </section>
    </section>
    <section class="collapse-fields">
      <h5 translate="trialModal.call.shippingInfo"></h5>
      <section class="row">
        <formly-form class="small-12 columns" model="callTrial.details.shippingInfo"
          fields="callTrial.shippingFields" hide-directive="ng-show">
        </formly-form>
      </section>
    </section>
  </section>
  </form>
</section>
<!-- footer -->
<div class="modal-footer">
  <a class="pad-top pull-left" ng-if="callTrial.canAddDevice || !callTrial.limitReached"
    ng-click="callTrial.skip(true); trial.nextStep()"
    translate="trialModal.call.skipAddDevices">
  </a>
  <button class="btn" ng-click="trial.previousStep()" ng-disabled="trial.loading"
    translate="common.back">
  </button>
  <button id="startTrialButton" class="btn btn--primary" type="button" cs-btn loading="trial.loading"
    ng-click="trialForm.$setPristine(true); callTrial.skip(false); trial.nextStep()" ng-disabled="trialForm.$invalid">
      <span ng-if="!trial.hasNextStep()" translate="partnerHomePage.startTrial"></span>
      <span ng-if="trial.hasNextStep()" translate="common.next"></span>
    </span>
  </button>
</div>
