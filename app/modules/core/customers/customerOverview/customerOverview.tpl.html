<div class="customer-overview">
  <cs-sp-header>
    <div class="header-info" id="customer-info">
      <div class="header-info-wrap">
        <div class="header-title">
          <span>{{customerOverview.currentCustomer.customerName}}</span>
        </div>
        <div class="header-sub-info">
          <span translate="customerPage.contactEmail"></span> {{customerOverview.currentCustomer.customerEmail}}
        </div>
      </div>
    </div>
  </cs-sp-header>
 <cs-sp-container>
  <cs-sp-buttons ng-show="customerOverview.form.$dirty || CustomerOverview.saved">
    <button class="btn btn--primary" ng-click="customerOverview.saveLogoSettings()" type="submit" translate="common.save"></button>
    <button ng-click="customerOverview.reset()" translate="common.cancel"></button>
  </cs-sp-buttons>
    <cs-sp-section>
      <button id="launchCustomer" ng-if="!customerOverview.isOwnOrg()" class="btn btn--people"
      ng-disabled="!customerOverview.currentCustomer.isAllowedToManage && !customerOverview.isPartnerAdmin"
      ng-click="customerOverview.launchCustomerPortal()">
        <span ng-if="customerOverview.isOrgSetup" translate="customerPage.launchButton"></span>
        <span ng-if="!customerOverview.isOrgSetup" translate="customerPage.setupButton"></span>
      </button>
      <a ng-if="customerOverview.isOwnOrg()" ui-sref="launch_partner_org({partnerOrgId: customerOverview.partnerOrgId, partnerOrgName: customerOverview.partnerOrgName, launchPartner: true})" target="_blank">
        <button id="launchPartner" class="btn btn--people" translate="customerPage.myOrgButton">
        </button>
      </a>
    </cs-sp-section>
    <cs-sp-section ng-if="customerOverview.currentCustomer.trialId">
      <div class="section-title-row">
        <span class="section-name" translate="customerPage.trial"></span>
        <span cs-dropdown class="actions-menu dropdown pull-right">
          <button cs-dropdown-toggle class="actions-button btn--none dropdown-toggle">
            <i class="icon icon-three-dots"></i>
          </button>
          <ul cs-dropdown-menu class="dropdown-menu dropdown-primary actions-services">
            <li><a href ng-click="customerOverview.openEditTrialModal()" translate="customerPage.edit"></a></li>
          </ul>
        </span>
      </div>
      <div class="trial-bar">
        <div class="trial-status">
          <div>
              <span>{{customerOverview.currentCustomer.duration}}</span> <span translate="customerPage.dayTrial"></span>
          </div>
          <div>
              <span ng-class="{'trial-danger': customerOverview.currentCustomer.daysLeft <= 5, 'user-title': customerOverview.currentCustomer.daysLeft > 5}">{{customerOverview.getDaysLeft(customerOverview.currentCustomer.daysLeft)}}</span>
          <span ng-if="customerOverview.currentCustomer.daysLeft > 0" ng-class="{'trial-danger': customerOverview.currentCustomer.daysLeft <= 5, 'user-title': customerOverview.currentCustomer.daysLeft > 5}" translate="customerPage.daysLeft"></span>
          </div>
        </div>
        <div class="progress">
          <div class="progress-bar" ng-class="{'danger-bar': customerOverview.currentCustomer.daysLeft <= 5, 'warning-bar': (customerOverview.currentCustomer.daysLeft < customerOverview.currentCustomer.duration/2), 'success-bar': (customerOverview.currentCustomer.daysLeft >= customerOverview.currentCustomer.duration/2)}" role="progressbar" aria-valuenow="{{getProgressValue(customerOverview.currentCustomer)}}" aria-valuemin="0" aria-valuemax="{{customerOverview.currentCustomer.duration}}" style="width: {{customerOverview.currentCustomer.percentUsed}}%;"></div>
        </div>
      </div>
      <div class="feature-list trials-list" >
        <ul>
          <li class="feature" ng-if="customerOverview.offer.userServices">
            <div class="feature-name" id="trial-info"> <i class="icon icon-circle-group feature-icon"></i>{{:: customerOverview.offer.userServices | translate}}</div>
            <div class="feature-details pull-right">{{customerOverview.currentCustomer.licenses}}&nbsp;{{::'common.quantity' | translate | uppercase}}</div>
          </li>
          <li class="feature"  ng-if="customerOverview.showRoomSystems && customerOverview.offer.deviceBasedServices">
            <div class="feature-name"><i class="icon icon-circle-telepresence feature-icon"></i>{{::customerOverview.offer.deviceBasedServices|translate}}</div>
            <div class="feature-details pull-right">{{customerOverview.currentCustomer.deviceLicenses}}&nbsp;{{::'common.quantity' | translate | uppercase}}</div>
          </li>
        </ul>
      </div>
    </cs-sp-section>
  <!-- services -->
  <cs-sp-section  ng-if= "customerOverview.newCustomerViewToggle && (customerOverview.nonTrialServices|| customerOverview.meetingServices)">
    <div class="section-title-row">
      <span class="section-name" translate="customerPage.services"></span>
    </div>
    <div class="feature-list services-list" >
      <ul ng-class="{'has-meeting': customerOverview.meetingServices}">
        <!-- paid services -->
        <li class="feature" ng-repeat = "service in customerOverview.nonTrialServices">
          <div class="feature-name" ><i class="icon  feature-icon  {{service.icon}} " ></i>{{:: service.name | translate}}</div>
            <div class="feature-details pull-right" ng-show="!service.free">{{service.qty}}&nbsp;{{::'common.quantity' | translate | uppercase}}</div>
            <div class="feature-details pull-right" ng-show="service.free">{{::'customerPage.free' | translate | uppercase}}</div>
          </li>
          <!-- if there is meeting -->
          <li class="feature" id="meeting" ng-if="customerOverview.meetingServices">
           <a ui-sref="customer-overview.meetingDetail({meetingLicenses: customerOverview.meetingServices.sub})" >
            <div class="feature-name"><i class="icon  feature-icon  {{customerOverview.meetingServices.icon}} " ></i>{{::customerOverview.meetingServices.name}}</div>
            <div class="feature-details pull-right">{{customerOverview.meetingServices.qty}} &nbsp;{{::'common.quantity' | translate | uppercase}}</div>
            <i class="feature-arrow"></i>
          </a>
        </li>
      </ul>
    </div>
  </cs-sp-section>
    <trial-webex-overview></trial-webex-overview>
    <uc-external-number-overview ng-if="customerOverview.isSquaredUC"></uc-external-number-overview>
    <cs-sp-section>
      <div class="section-title-row">
        <span class="section-name" translate="customerPage.branding"></span>
      </div>
      <div class="feature-list">
        <ul>
          <li class="feature">
            <span class="feature-name" translate="customerPage.partnerLogo">
            </span>
            <span class="feature-details" ng-if="customerOverview.usePartnerLogo" translate="common.enabled">
            </span>
            <span class="feature-details" ng-if="!customerOverview.usePartnerLogo" translate="common.disabled">
            </span>
          </li>
          <form ng-if="customerOverview.logoOverride" novalidate name="customerOverview.form" novalidate role="form">
          <li class="feature">
            <span class="feature-name" translate="customerPage.logoOverride"></span>
            <cs-toggle-switch ng-model="customerOverview.allowCustomerLogos" toggle-id="allowCustomerLogo" name="allowCustomerLogo" size="small"></cs-toggle-switch>
          </li>
           </form>
        </ul>
      </div>
    </cs-sp-section>
    <uc-customer-administrator-overview ng-if="customerOverview.isPartnerAdmin"></uc-customer-administrator-overview>
   <button id="deleteCustomer" cs-btn class="btn btn--link btn--negative btn--delete " ng-show="customerOverview.isTest && !customerOverview.isOwnOrg()"
      ng-click="customerOverview.deleteTestOrg()" loading="customerOverview.isDeleting">
     <i class="icon icon-trash"></i>
     <span translate="customerPage.deleteOrg" translate-values="{orgName: customerOverview.customerName}"></span>
    </button>
  </cs-sp-container>
</div>
