<!-- BEGIN Messenger Tab -->
<div class="container-org-info">

  <div class="page-title row">
    <span class="title">Messenger Administration</span>
  </div>

  <div class="content">
    <!-- BEGIN CONTENT -->

    <cs-tabset>

      <cs-tab>
        <cs-tab-heading>Organization Info</cs-tab-heading>
        <div>
          <!-- BEGIN TAB CONTENT -->

          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Organization Info</h3>
            </div>
            <div class="panel-body">

              <!-- BEGIN PANEL CONTENT -->

              <!-- BEGIN ORG INFO -->

              <div class="bottom-padding col-md-5 float-left min-width-350">
                <h3 class="margin-left-15px">Organization Info</h3>

                <div ng-if="orgInfo.dataState.loading === orgInfo.org.dataStatus">
                  <span class="icon icon-spinner"></span>
                  Loading Org Data
                </div>

                <div ng-if="orgInfo.dataState.error === orgInfo.org.dataStatus">
                  <span class="icon icon-warning"></span>
                  <span>{{orgInfo.org.errorMsg}}</span>
                </div>

                <div ng-if="orgInfo.dataState.loaded === orgInfo.org.dataStatus">

                  <form class="form-horizontal" role="form">
                    <!-- Begin Input Form -->

                    <div class="form-group">
                      <label for="inputCompany" class="control-label">Company</label>
                      <div class="">
                        <p class="form-control-static">{{orgInfo.org.info.contactInfo.company}}</p>
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputAddr1" class="control-label">Address</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.addr1" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputAddr2" class="control-label">Address cont'd</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.addr2" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputCity" class="control-label">City</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.city" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputState" class="control-label">State</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.state" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputCountry" class="control-label">Country</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.country" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputZip" class="control-label">Zip Code</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.zip" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <label for="inputPhone" class="control-label">Phone</label>
                      <div>
                        <input type="text" ng-model="orgInfo.org.info.contactInfo.phone" class="form-control">
                      </div>
                    </div>

                    <div class="form-group">
                      <!-- <span class="col-sm-2"></span> -->
                      <div class="col-md-3">
                        <button type="submit" class="btn btn-primary" ng-click="orgInfo.setOrgInfo()">Save</button>
                      </div>
                      <!-- <span class="col-md-3"></span> -->
                      <div>
                        <button class="btn btn-warning" ng-click="orgInfo.refreshOrgInfo()">Reset</button>
                      </div>
                    </div>

                    <!-- End Input Form -->
                  </form>
                </div>
              </div>
              <!-- END ORG INFO -->



              <!-- BEGIN CI SYNC -->
              <div ng-controller="CiSyncCtrl as sync">
                <div ng-if="orgInfo.dev">
                  <p>[DEBUG] Viewing as {{sync.adminType.label}}</p>
                  <div class="btn-group">
                    <button type="button" ng-click="sync.setOrgAdmin()" ng-disabled="sync.adminTypes.org === sync.adminType" class="btn btn-primary">{{sync.adminTypes.org.label}}</button>
                    <button type="button" ng-click="sync.setOpsAdmin()" ng-disabled="sync.adminTypes.ops === sync.adminType" class="btn btn-primary">{{sync.adminTypes.ops.label}}</button>
                  </div>
                </div>

                <div class="col-md-3">
                    <h3>Sync Status</h3>

                    <formly-form model="sync.data" fields="sync.fields" ng-init="sync.windowReady()" style="min-width: 500px;">
                    </formly-form>

                    <p class="control-label">Sync Status</p>
                    <!-- Ugly, but it seems the only way that works so far. Would be nice to find simpler way -->
                    <cs-toggle-switch ng-if="sync.adminTypes.ops !== sync.adminType" ng-model="sync.data.isSyncing" toggle-id="toggleIsSyncing" name="toggleSyncing" class="on" is-disabled="true" size="small"></cs-toggle-switch>
                    <cs-toggle-switch ng-if="sync.adminTypes.ops === sync.adminType" ng-model="sync.data.isSyncing" toggle-id="toggleIsSyncing" name="toggleSyncing" size="small"></cs-toggle-switch>

                    <p class="control-label">Authentication Redirect</p>
                    <!-- Ugly, but it seems the only way that works so far. Would be nice to find simpler way -->
                    <cs-toggle-switch ng-if="sync.adminTypes.ops !== sync.adminType"  ng-model="sync.data.isAuthRedirect" toggle-id="toggleAuthRedirect" name="toggleAuth" class="on" is-disabled="true" size="small"></cs-toggle-switch>
                    <cs-toggle-switch ng-if="sync.adminTypes.ops === sync.adminType"  ng-model="sync.data.isAuthRedirect" toggle-id="toggleAuthRedirect" name="toggleAuth" size="small"></cs-toggle-switch>
                </div>
              </div>
              <!-- END CI SYNC -->

              <!-- END PANEL CONTENT -->
            </div>
          </div>

          <!-- END TAB CONTENT -->
        </div>
      </cs-tab>

      <cs-tab ng-if="orgInfo.dev">
        <cs-tab-heading>Debug</cs-tab-heading>
        <div>
          <!-- BEGIN TAB CONTENT -->

          <div class="info">

            <span class="info-header">Info from CI</span>

            <ul>
              <li class="data-item" ng-repeat="entry in orgInfo.ciData"><span class="data-key">{{entry.key}}:</span> {{entry.value}}</li>
            </ul>

            <div class="sub-info indented">
              <span class="info-header">Admins</span>

              <div ng-repeat="admin in orgInfo.ciAdmins">
                <ul>
                  <li class="data-item" ng-repeat="(key, value) in admin"><span class="data-key">{{key}}:</span> {{value}}</li>
                </ul>
              </div>
            </div>

            <div class="sub-info indented">
              <span class="info-header">Users</span>

              <div ng-repeat="user in orgInfo.ciUsers">
                <ul>
                  <li class="data-item" ng-repeat="(key, value) in user"><span class="data-key">{{key}}:</span> {{value}}</li>
                </ul>
              </div>
            </div>
          </div>



          <div class="info">
            <span class="info-header">Info from WAPI (URDB)</span> <button class="btn btn-default" ng-click="orgInfo.refreshOrgInfo()">Refresh</button>

            <ul>
              <li class="data-item" ng-repeat="entry in orgInfo.org.info.orgInfo"><span class="data-key">{{entry.key}}:</span> {{entry.value}}</li>
            </ul>

            <div class="sub-info indented">
              <span class="info-header">General Info</span>

              <div>
                <ul>
                  <li class="data-item" ng-repeat="entry in orgInfo.org.info.generalInfo"><span class="data-key">{{entry.key}}:</span> {{entry.value}}</li>
                </ul>
              </div>
            </div>

            <div class="sub-info indented">
              <span class="info-header">Policies</span>

              <div>
                <ul>
                  <li class="data-item" ng-repeat="policy in orgInfo.org.info.policies"><span class="data-key">{{policy.key}}:</span> {{policy.value}}</li>
                </ul>
              </div>
            </div>

            <div class="sub-info indented">
              <span class="info-header">Ext</span>

              <div>
                <ul>
                  <li class="data-item" ng-repeat="entry in orgInfo.org.info.ext"><span class="data-key">{{entry.key}}:</span> {{entry.value}}</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- END TAB CONTENT -->
        </div>
      </cs-tab>

    </cs-tabset>

    <!-- END CONTENT -->
  </div>

</div>
<!-- END Messenger Admin Page -->
