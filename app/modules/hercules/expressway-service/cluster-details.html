<div ui-view="header"></div>

<cs-sp-container class="hercules-fix-paragraphs" ng-if="!expresswayServiceDetails.serviceNotInstalled()">

  <cs-sp-section>
    <div class="section-title-row section-name">
      Alarms
    </div>

    <div class="feature-list" ng-if="expresswayServiceDetails.selectedService.alarm_count > 0">
      <ul ng-repeat="connector in expresswayServiceDetails.selectedService.connectors">
        <li class="feature" ng-repeat="alarm in connector.alarms" ng-class="{'list-item': !$first}">
          <a ui-sref="cluster-details-new.alarm-details({alarm: alarm, host: connector.host.host_name})">
            <i class="icon icon-error hercules-alarm status-icon"/>
            <span class="feature-name">{{alarm.title}}</span>
            <span class="feature-status">View Alarm</span>
            <i class="feature-arrow"></i>
          </a>
        </li>
      </ul>
    </div>
    <p ng-if="expresswayServiceDetails.selectedService.alarm_count == 0">
      No alarms reported
    </p>
  </cs-sp-section>

  <cs-sp-section>
    <div class="section-title-row section-name">
      Software Upgrade
    </div>

    <div class="feature-list">
      <ul>
        <li class="feature">
          <span class="feature-name">Current version</span>
          <span class="feature-status">{{expresswayServiceDetails.selectedService.connectors[0].version}}</span>
        </li>
        <li class="feature" ng-if="expresswayServiceDetails.selectedService.software_upgrade_available">
          <span class="feature-name">New version</span>
          <span class="feature-status">{{expresswayServiceDetails.selectedService.not_approved_package.version}}</span>
        </li>
        <li class="feature" ng-if="!expresswayServiceDetails.selectedService.software_upgrade_available">
          <span class="feature-name">No new software available</span>
        </li>
      </ul>
    </div>
    <button class="button secondary"
            ng-click="expresswayServiceDetails.upgrade()"
            ng-if="expresswayServiceDetails.selectedService.software_upgrade_available">Upgrade
    </button>
  </cs-sp-section>

  <cs-sp-section>
    <div class="section-title-row section-name">
      Hosts
    </div>
    <div class="feature-list">
      <ul>
        <li class="feature" ng-repeat="connector in expresswayServiceDetails.selectedService.connectors"
            ng-class="{'list-item': !$first}">
          <a ui-sref="cluster-details-new.host-details({connector: connector})">
            <i class="fa fa-circle status-icon"
               ng-class="connectors.alarms.length > 0 ? 'hercules-alarm' : connector.state"></i>
            <span class="feature-name">{{connector.host.host_name}}</span>
            <span class="feature-status"
                  translate="{{'hercules.status.' + (connector.state || 'unknown') }}"></span>
            <i class="feature-arrow"></i>
          </a>
        </li>
      </ul>
    </div>
  </cs-sp-section>

</cs-sp-container>

<cs-sp-container class="hercules-fix-paragraphs" ng-if="expresswayServiceDetails.serviceNotInstalled()">
  <p>
    The service is not installed on this cluster.
  </p>

  <p>
    On the Cisco Expressway, configure and enable the connectors under Applications > Hybrid Services > Connector
    Management.
  </p>
</cs-sp-container>
