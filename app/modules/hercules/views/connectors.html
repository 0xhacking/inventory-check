<div id="fusion-root" class="container-fluid">
  <div class="page-header row">
    <div class="col-sm-6 col-md-6">
      <h2 class="page-title" translate="hercules.page_title"></h2>
    </div>
    <div class="col-sm-6 col-md-6">
      <div class="page-option-buttons">
        <button class="btn btn-info" ng-click="reload()">
          <i class="fa fa-refresh"></i>
          Reload
        </button>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12"  style="padding-top: 20px;">
      <div ng-show="loading" style="text-align: center; padding-top: 60px;">
        <i class="icon icon-spinner icon-spin icon-2x"></i>
      </div>
      <div ng-show="error" translate="hercules.connectors.loading_error"></div>
      <div ng-show="!loading">
        <div ng-show="connectors.length == 0" translate="hercules.connectors.no_connectors"></div>

        <div ng-show="connectors.length != 0">

          <form ng-show="connectors.length > 1" class="form-inline" role="form">
            <div class="form-group">
              <label for="groupings" translate="hercules.connectors.group_by"></label>
              <select
                id="groupings"
                class="form-control"
                ng-model="current_grouping"
                ng-options="grouping.translate_attr | translate for grouping in groupings">
              </select>
            </div>
            <div style="float: right">
              <span
                class="badge badge-{{cl}}"
                style="margin-left: 3px;"
                ng-repeat="(cl, num) in aggregated_status">
                {{num}}
              </span>
            </div>
          </form>

          <div class="panel panel-default" ng-repeat="(name, connectors) in grouped_connectors">
            <div class="panel-heading panel-heading-default">
              <h4>{{name}}</h4>
            </div>
            <div class="panel-body">

              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 30%" translate="hercules.connectors.host_name"></th>
                    <th style="width: 30%" translate="hercules.connectors.display_name"></th>
                    <th style="width: 30%" translate="hercules.connectors.version"></th>
                    <th style="width: 10%" translate="hercules.connectors.status"></th>
                    <th style="width: 10%" translate="hercules.connectors.alarms"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="connector in connectors" id="{{connector.id}}">
                    <td>
                      <a href="https://{{connector.host_name}}/" target="_blank">
                        {{connector.host_name}}
                      </a>
                    </td>
                    <td>{{connector.display_name}}</td>
                    <td>
                      {{connector.version}}
                      <a
                        href=""
                        style="float: right"
                        class="label label-info"
                        ng-show="connector.available_update"
                        ng-click="upgradeSoftware(connector.id)">
                        Upgrade to {{connector.available_update.version}}
                      </a>
                    </td>
                    <td>
                      <span
                        class="label label-{{connector.status_class}}"
                        style="margin-right: 5px;">
                        {{'hercules.status.' + connector.status.state | translate}}
                      </span>
                    </td>
                    <td>
                      <a
                        target="_blank"
                        class="label label-danger"
                        ng-show="connector.status.alerts.length"
                        href="https://{{connector.host_name}}/alarms">
                          {{connector.status.alerts.length}}
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
