<cs-sp-container>

  <cs-sp-section>
    <div class="section-name" style="padding: 15px 0;">
      {{service.display_name}}
    </div>

    <!-- connectors -->
    <div ng-repeat="connector in service.connectors" class="list" style="padding-bottom: 10px">
      <a ui-sref="cluster-details.hosts({clusterId: cluster.id, hostSerial: connector.host.serial})" ng-class="connector.status">
        <i class="fa fa-circle" />
        <span>{{connector.host.host_name}}</span>
        <i class="icon icon-chevron-right pull-right" />
        <div class="clearfix" style="color: #999; font-size: 9px; padding-left: 27px;">
          <span translate="{{'hercules.status.' + (connector.state || 'unknown') }}"></span>
        </div>
        <div class="clearfix" style="color: #999; font-size: 9px; padding-left: 27px;">
          Version: {{connector.version}}.
          <span ng-show="connector.software_upgrade_pending">
            Pending software upgrade to {{connector.software_upgrade_pending}}
          </span>
        </div>
        <div class="clearfix" style="color: #999; font-size: 9px; padding-left: 27px;" ng-show="connector.alarms.length">
          <span ng-show="connector.alarms.length==1">
            {{connector.alarms.length}} reported alarm
          </span>
          <span ng-hide="connector.alarms.length==1">
            {{connector.alarms.length}} reported alarms
          </span>
        </div>
      </a>
    </div>
    <div ng-hide="service.connectors.length" class="list">
      <div class="disabled">
        <i class="fa fa-circle" />
        <span>Not installed on any hosts.</span>
      </div>
    </div>
  </cs-sp-section>

  <!-- connectors -->
  <cs-sp-section ng-show="service.needs_attention && service.alarm_count">
    <div ng-repeat="connector in service.connectors">

      <!-- connector alarms -->
      <div ng-show="{{connector.alarms.length}}">
        <div class="clearfix" style="padding: 15px 0 5px 0; font-weight: bold;">
          <span style="color: #f05d3b">{{connector.host.host_name}}</span>
          <span ng-show="connector.alarms.length == 1">has reported {{connector.alarms.length}} alarm:</span>
          <span ng-hide="connector.alarms.length == 1">has reported {{connector.alarms.length}} alarms:</span>
        </div>

        <div ng-repeat="alarm in connector.alarms" style="padding-bottom: 5px;" class="clearfix">
          <span style="color: #f05d3b; text-transform: capitalize;">{{alarm.severity}}:</span>
          <span>{{alarm.title}}.</span>
          <span>{{alarm.description}}</span>
        </div>

        <a target="_blank" ng-href="https://{{connector.host.host_name}}/alarms" class="btn btn-primary btn-sm" style="color: white; padding-bottom: 5px">
          Manage alarms
        </a>

      </div>
    </div>
  </cs-sp-section>

  <!-- sw upgrade -->
  <cs-sp-section ng-show="service.software_upgrade_available">
    <div class="section-name" style="padding: 15px 0;">
      Software Upgrade
    </div>

    <hercules-software-upgrade />

  </cs-sp-section>

</cs-sp-container>
