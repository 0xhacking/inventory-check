<!-- AA Option Menu -->
<div class="aa-menu">
  <table id="aaMenuOptionTable" class="aa-menu-table" ng-show="aaOption.ui.showOptionMenu">
    <thead>
      <tr>
        <th class="col-md-1">
          <div class="aa-menu-delete-icon-md">
          <a ng-click="aaOption.deleteMenu(aaOption.ui.optionMenu)">
            <i class="menu-delete-icon-md"></i>
            <!-- span sr-only deleteMenu-->
          </a>
          </div>
        </th>
        <th class="col-md-1"><!--placeholder--></th>
        <th class="col-md-8"><h5 translate="autoAttendant.mainMenu"></h5></th>
        <th class="col-md-2">
          <div class="dropdown aa-menu-dropdown-icon">
            <span>
              <a href class="dropdown-toggle">
                <i class="menu-dropdown-icon"></i>
              </a>
            </span>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="choice in aaOption.optionMenuDropdownItems">
                <a href ng-click="aaOption.addMenuOption()">{{choice}}</a>
              </li>
            </ul>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="menuOption in aaOption.ui.optionMenu.headers" ng-class="{ 'aa-menu-has-error' : !menuOption.isConfigured && menuOption.isTouched }" popover="{{ !menuOption.isConfigured && menuOption.isTouched ? ( 'autoAttendant.invalidMenuOptionRequired' | translate ) : '' }}" popover-trigger="mouseenter" tooltip-append-to-body="true" popover-animation="false" popover-popup-delay='600'>
        <td class="col-md-1"><!--placeholder--></td>
        <td class="col-md-1"><!--placeholder--></td>
        <td class="col-md-9" ng-class="{ 'text-muted' : !menuOption.isConfigured }">
          <dl class="aa-menu-option">
            <dd ng-class="{ 'small' : menuOption.isConfigured }">{{ menuOption | displayNameTitle }}</dd>
            <dd> {{ menuOption | displayNameAction }} </dd>
            <dd ng-if="menuOption.actions[0].description" class="small">{{ menuOption.actions[0].description }}</dd>
            <dd ng-if="!menuOption.actions[0].description"><br></dd>
          </dl>
        </td>
        <td class="col-md-2">
          <div class="aa-menu-launch-icon">
            <span>
              <a ng-click="aaOption.copyMenuOption(aaOption.ui.optionMenu,menuOption)" data-toggle="modal" data-backdrop="false" data-target="#aaOptionMenuDialog">
                <i class="menu-launch-icon"></i>
                <!-- span sr-only edit menu option-->
              </a>
            </span>
          </div>
        </td>
      </tr>
      <tr ng-repeat="menuOption in aaOption.ui.optionMenu.entries" ng-class="{ 'aa-menu-has-error' : !menuOption.isConfigured && menuOption.isTouched && aaOption.ui.optionMenu.entries[0] === menuOption}" popover="{{ !menuOption.isConfigured && menuOption.isTouched && aaOption.ui.optionMenu.entries[0] === menuOption ? ( 'autoAttendant.invalidMenuOptionRequired' | translate ) : '' }}" popover-trigger="mouseenter" tooltip-append-to-body="true" popover-animation="false" popover-popup-delay='600'>
        <td class="col-md-1">
          <div class="aa-menu-delete-icon">
            <span>
              <a ng-click="aaOption.deleteMenuOption(aaOption.ui.optionMenu,menuOption)">
                <i class="menu-delete-icon"></i>
                <!-- span sr-only delete menu option -->
              </a>
            </span>
          </div>
        </td>
        <td class="col-md-1"> {{menuOption.key}} </td>
        <td class="col-md-9" ng-class="{ 'text-muted' : !menuOption.isConfigured }">
          <dl class="aa-menu-option">
            <dd ng-if="!menuOption.isConfigured">{{ menuOption | displayNameTitle }}</dd>
            <dd ng-if="menuOption.isConfigured">{{ menuOption | displayNameAction }}</dd>
            <dd ng-if="!menuOption.description"><br></dd>
            <dd ng-if="menuOption.description" class="small">{{ menuOption.description }}</dd>
          </dl>
        </td>
        <td class="col-md-2">
          <div class="aa-menu-launch-icon">
            <span>
              <a ng-click="aaOption.copyMenuOption(aaOption.ui.optionMenu,menuOption)" data-toggle="modal" data-backdrop="false" data-target="#aaOptionMenuDialog">
                <i class="menu-launch-icon" ></i>
                <!-- span sr-only edit menu option -->
              </a>
            </span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<!-- Option Menu Modal Dialog -->
<div class="modal" id="aaOptionMenuDialog" tabindex="-1" role="dialog" aria-labelledby="deleteRoomTitle" aria-hidden="true">
  <div class="modal-dialog aa-modal-dialog">
    <div class="modal-content aa-modal-content">
      <div class="modal-header">
        <button id="device-modal-close" type="button" class="close" ng-click="optionForm.$setUntouched();optionForm.$setPristine();aaOption.touchCurrentMenuOption();aaOption.closeMenuOption()">
          <span class="sr-only" translate="common.close"></span>
        </button>
        <h3 class="modal-title" translate="{{ aaOption.optionDialogMenuEntry | displayNameTitle }}"></h3>
      </div>
      <form role="form" name="optionForm" novalidate>
        <div class="modal-body">
          <!-- key -->
          <div class="form-group" ng-if="aaOption.showKey" ng-class="{ 'has-error has-feedback aa-validation': optionForm.keySelect.$touched && optionForm.keySelect.$invalid }">
              <label class="control-label" for="keySelect" translate="autoAttendant.key"></label><span class="asterix"> *</span>
              <select id="keySelect" name="keySelect" class="form-control" ng-model="aaOption.selectedKey" ng-options="key for key in aaOption.keys" required>
                <option value="" disabled translate="autoAttendant.keyPlaceholder"</option>
              </select>
              <span class="form-control-feedback" ng-if="optionForm.keySelect.$touched && optionForm.keySelect.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
          </div>
          <!-- action -->
          <div class="form-group" ng-if="!aaOption.showPlay" ng-class="{ 'has-error has-feedback aa-validation': optionForm.actionSelect.$touched && optionForm.actionSelect.$invalid }">
            <label class="control-label" for="actionSelect" translate="autoAttendant.action"></label><span class="asterix"> *</span>
            <select id="actionSelect" name="actionSelect" class="form-control" ng-model="aaOption.selectedAction" ng-options="action.label for action in aaOption.optionMenuEntryActions" required>
              <option value="" disabled translate="autoAttendant.actionPlaceholder"></option>
            </select>
            <span class="form-control-feedback" ng-if="optionForm.actionSelect.$touched && optionForm.actionSelect.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
          </div>
          <!-- play - menu level-->
         <div class="form-group"  ng-if="aaOption.showPlay" ng-class="{ 'has-error has-feedback aa-validation': optionForm.playFileInput.$touched && optionForm.playFileInput.$invalid }">
            <label class="control-label" ng-if="aaOption.showPlay" for="playFileInput" translate="common.play"></label><span class="asterix"> *</span>
            <input class="form-control" type="text" id="playFileInput" name="playFileInput" ng-model="aaOption.optionDialogMenuEntry.file" required placeholder="{{ 'autoAttendant.playPlaceholder' | translate }}" size="30"/>
            <span class="form-control-feedback" ng-if="optionForm.playFileInput.$touched && optionForm.playFileInput.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
            <span class="form-control-feedback" ng-if="optionForm.playFileInput.$touched && optionForm.playFileInput.$error.url" popover-placement="top" popover="{{ 'common.invalidUrl' | translate }}"><i class="icon icon-warning"></i></span>
          </div>
          <!-- play - action selected -->
          <div class="form-group" ng-if="!aaOption.showPlay && aaOption.selectedAction.value === 1" ng-class="{ 'has-error has-feedback aa-validation aa-action-input': optionForm.playFileInput.$touched && optionForm.playFileInput.$invalid }">
            <label class="sr-only" for="playFileInput" ng-if="!aaOption.showPlay" translate="autoAttendant.urlPlaceholder"></label>
            <input class="form-control" type="text" id="playFileInput" name="playFileInput" ng-model="aaOption.optionDialogMenuEntry.file" required placeholder="{{ 'autoAttendant.playPlaceholder' | translate }}" size="30"/>
            <span class="form-control-feedback" ng-if="optionForm.playFileInput.$touched && optionForm.playFileInput.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
            <span class="form-control-feedback" ng-if="optionForm.playFileInput.$touched && optionForm.playFileInput.$error.url" popover-placement="top" popover="{{ 'common.invalidUrl' | translate }}"><i class="icon icon-warning"></i></span>
          </div>
          <!--route-->
          <div class="form-group" ng-if="aaOption.selectedAction.value === 2 || aaOption.selectedAction.value === 3" ng-class="{ 'has-error has-feedback  aa-validation aa-action-input': optionForm.numberInput.$touched && optionForm.numberInput.$invalid }">
            <label for="numberInput" class="sr-only" translate="autoAttendant.numberPlaceholder"></label>
            <input id="numberInput" name="numberInput" type="text" class="form-control" maxlength="20" ng-model="aaOption.optionDialogMenuEntry.number" placeholder="{{ 'autoAttendant.numberPlaceholder' | translate }}" required/>
            <span class="form-control-feedback" ng-if="optionForm.numberInput.$touched && optionForm.numberInput.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
          </div>
          <!--disconnect-->
          <div class="form-group" ng-if="aaOption.selectedAction.value === 6">
             <fieldset >
              <cs-radio label="aaOption.disconnectBusy.label" value="aaOption.disconnectBusy.value" name="disconnectRadio" id="aaOption.disconnectBusy.id" ng-model="aaOption.optionDialogMenuEntry.treatment" isdisabled="aaOption.disconnectBusy.isDisabled"></cs-radio>
              <cs-radio label="aaOption.disconnectTone.label" value="aaOption.disconnectTone.value" name="disconnectRadio" id="aaOption.disconnectTone.id" ng-model="aaOption.optionDialogMenuEntry.treatment" isdisabled="aaOption.disconnectTone.isDisabled"></cs-radio>
              <cs-radio label="aaOption.disconnectNone.label" value="aaOption.disconnectNone.value" name="disconnectRadio" id="aaOption.disconnectNone.id" ng-model="aaOption.optionDialogMenuEntry.treatment" isdisabled="aaOption.disconnectNone.isDisabled"></cs-radio>
            </fieldset>
          </div>
          <!--description-->
          <div class="form-group" ng-if="!aaOption.showActionDescription">
            <label class="control-label" for="description" translate="autoAttendant.description"></label>
            <input id="description" name="description" type="text" class="form-control" maxlength="20" ng-model="aaOption.optionDialogMenuEntry.description" placeholder="{{ 'autoAttendant.descriptionPlaceholder' | translate }}" />
          </div>
          <div class="form-group" ng-if="aaOption.showActionDescription">
            <label class="control-label" for="description" translate="autoAttendant.description"></label>
            <input id="description" name="description" type="text" class="form-control" maxlength="20" ng-model="aaOption.optionDialogMenuEntry.actions[0].description" placeholder="{{ 'autoAttendant.descriptionPlaceholder' | translate }}" />
          </div>
        </div>
        <div class="modal-footer aa-tooltip">
          <button id="cancelButton" class="btn btn-default" type="button" ng-click="optionForm.$setUntouched();optionForm.$setPristine();aaOption.closeMenuOption()" translate="common.cancel"></button>
          <div class="aa-tooltip-wrapper" tooltip-html-unsafe="{{optionForm.$invalid ? ('autoAttendant.invalidRequiredFields'| translate) : '' }}" tooltip-trigger="mouseenter" tooltip-popup-delay='800' tooltip-placement="top">
          <!---optionForm.$pristine not used for ng-disabled since disconnect already has option selected -->
          <button id="aaSaveButton" class="btn btn-primary btn-save" type="submit" ng-click="aaOption.saveMenuOption(aaOption.optionDialogMenuEntry);optionForm.$setUntouched();optionForm.$setPristine();aaOption.closeMenuOption()" ng-disabled="optionForm.$invalid" translate="common.save"></button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
