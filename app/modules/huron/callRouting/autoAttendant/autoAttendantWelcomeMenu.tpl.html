<!-- AA Welcome Menu -->
<div class="aa-menu">
  <table id="aaMenuOptionTable" class="aa-menu-table">
    <thead>
      <tr>
        <th class="col-md-1"><!--placeholder--></th>
        <th class="col-md-1"><!--placeholder--></th>
        <th class="col-md-8">
          <h5 ng-if="aaWelcome.ui.welcomeMenu.entries.length === 0 && !aaWelcome.ui.showOptionMenu && !aaWelcome.ui.showCustomMenu" class="text-muted" translate="autoAttendant.welcomeStartHelp"></h5>
           <h5 ng-if="aaWelcome.ui.welcomeMenu.entries.length > 0 || aaWelcome.ui.showOptionMenu || aaWelcome.ui.showCustomMenu" class="text-muted" translate="autoAttendant.welcomeOngoingHelp"></h5>
        </th>
        <th class="col-md-2">
          <div cs-dropdown class="dropdown aa-menu-dropdown-icon">
            <span >
              <a cs-dropdown-toggle href class="dropdown-toggle">
                <i class="menu-dropdown-icon"></i>
              </a>
            </span>
            <ul cs-dropdown-menu class="dropdown-menu" role="menu">
              <li ng-repeat="choice in aaWelcome.welcomeMenuDropdownItems">
                <a href ng-click="choice.invoke()">
                  <span translate="{{ choice.title }}"></span>
                </a>
              </li>
            </ul>
          </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="mOption in aaWelcome.ui.welcomeMenu.entries">
        <td class="col-md-1">
          <div class="aa-menu-delete-icon">
            <span>
              <a ng-click="aaWelcome.deleteMenuOption(aaWelcome.ui.welcomeMenu,mOption)">
                <i class="menu-delete-icon"></i>
                <!-- span sr-only deleteMenuOption -->
              </a>
            </span>
          </div>
        </td>
        <td class="col-md-1"><!--placeholder--></td>
        <td class="col-md-8" ng-class="{ 'text-muted' : !mOption.isConfigured }">
        <dl class="aa-menu-option">
          <dd ng-if="!mOption.isConfigured">{{ mOption | displayNameTitle }}</dd>
          <dd ng-if="mOption.isConfigured">{{ mOption | displayNameAction }} </dd>
          <dd ng-if="!mOption.actions[0].description"><br></dd>
          <dd ng-if="mOption.actions[0].description" class="small">{{ mOption.actions[0].description }}</dd>
        </dl>
        <td class="col-md-2">
          <div class="aa-menu-launch-icon">
            <span>
              <a data-toggle="modal" data-backdrop="false" data-target="#aaWelcomeMenuDialog" ng-click="aaWelcome.copyMenuOption(aaWelcome.ui.welcomeMenu,mOption)" ng-model="mOption.isConfigured">
                <i class="menu-launch-icon"></i>
                <!-- span sr-only editMenuoption -->
              </a>
            </span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<!-- Welcome Menu Modal Dialog -->
<div class="modal" id="aaWelcomeMenuDialog" tabindex="-1" role="dialog" aria-labelledby="deleteRoomTitle" aria-hidden="true">
  <div class="modal-dialog aa-modal-dialog">
    <div class="modal-content aa-modal-content">
      <div class="modal-header">
        <button id="device-modal-close" type="button" class="close" ng-click="welcomeForm.$setUntouched();welcomeForm.$setPristine();aaWelcome.closeMenuOption()">
          <span class="sr-only" translate="common.close"</span>
        </button>
        <h3 class="modal-title" translate="{{ aaWelcome.welcomeDialogMenuEntry | displayNameTitle }}"</h3>
      </div>
      <form role="form" name="welcomeForm" novalidate>
        <div class="modal-body">
            <div ng-switch on="aaWelcome.welcomeDialogMenuEntry.actions[0].getName()">
              <!-- route to mailbox - not used -->
              <div ng-switch-when="routeToMailbox" class="form-group">
                <label class="control=label" for="routeToMailboxInput" translate="autoAttendant.routeToMailbox"></label> <span class="asterix"> *</span>
                <input name="routoToMailboxInput" type="text" class="form-control" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" required/>
              </div>
              <!-- route to number -->
              <div ng-switch-when="route" class="form-group" ng-class="{ 'has-error has-feedback aa-validation': welcomeForm.routeNumber.$touched && welcomeForm.routeNumber.$invalid }">
                <label class="control-label" for="routeNumber" translate="autoAttendant.routeToNumber"></label><span class="asterix"> *</span>
                <input name="routeNumber" type="text" class="form-control" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" required maxlength="16" size="16" placeholder="{{ 'autoAttendant.numberPlaceholder' | translate }}"/>
                <span class="form-control-feedback" ng-if="welcomeForm.routeNumber.$touched && welcomeForm.routeNumber.$invalid" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
              </div>
              <!-- play annoucement-->
              <div ng-switch-when="play" class="form-group" ng-class="{ 'has-error has-feedback aa-validation': welcomeForm.playFileInput.$touched && welcomeForm.playFileInput.$invalid }">
                <label class="control-label" for="playFileInput" translate="common.play"></label><span class="asterix"> *</span>
                <input class="form-control" type="text" id="playFileInput" name="playFileInput" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" required placeholder="{{ 'autoAttendant.playPlaceholder' | translate }}" size="30"/>
                <span class="form-control-feedback" ng-if="welcomeForm.playFileInput.$touched && welcomeForm.playFileInput.$error.required" popover-placement="top" popover="{{ 'common.invalidRequired' | translate }}"><i class="icon icon-warning"></i></span>
                <span class="form-control-feedback" ng-if="welcomeForm.playFileInput.$touched && welcomeForm.playFileInput.$error.url" popover-placement="top" popover="{{ 'common.invalidUrl' | translate }}"><i class="icon icon-warning"></i></span>
              </div>
              <!-- disconnect -->
              <div ng-switch-when="disconnect" class="form-group">
                  <cs-radio label="aaWelcome.disconnectBusy.label" value="aaWelcome.disconnectBusy.value" name="disconnectRadio" id="aaWelcome.disconnectBusy.id" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" isdisabled="aaWelcome.disconnectBusy.isDisabled"></cs-radio>
                  <cs-radio label="aaWelcome.disconnectTone.label" value="aaWelcome.disconnectTone.value" name="disconnectRadio" id="aaWelcome.disconnectTone.id" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" isdisabled="aaWelcome.disconnectTone.isDisabled"></cs-radio>
                  <cs-radio label="aaWelcome.disconnectNone.label" value="aaWelcome.disconnectNone.value" name="disconnectRadio" id="aaWelcome.disconnectNone.id" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].value" isdisabled="aaWelcome.disconnectNone.isDisabled"></cs-radio>
              </div>
              <div ng-switch-default></div>
              <div class="form-group">
                <label for="description" class="control-label" translate="autoAttendant.description"></label>
                <input id="description" type="text" class="form-control" maxlength="20" size="12" ng-model="aaWelcome.welcomeDialogMenuEntry.actions[0].description" placeholder="{{ 'autoAttendant.descriptionPlaceholder' | translate }}"  />
              </div>
            </div>
        </div>
        <div class="modal-footer aa-tooltip">
          <button id="cancelButton" class="btn" type="button" ng-click="welcomeForm.$setUntouched();welcomeForm.$setPristine(); aaWelcome.closeMenuOption()" translate='common.cancel'></button>
          <div class="aa-tooltip-wrapper" tooltip-html-unsafe="{{ welcomeForm.$invalid ? ( 'autoAttendant.invalidRequiredFields' | translate ) : '' }}" tooltip-trigger="mouseenter" tooltip-placement="top">
          <!---welcomeForm.$pristine not used for ng-disabled since disconnect has default option selected-->
          <button id="aaSaveButton" class="btn btn--primary btn-save" type="submit" ng-click="aaWelcome.saveMenuOption(aaWelcome.welcomeDialogMenuEntry);welcomeForm.$setUntouched();welcomeForm.$setPristine(); aaWelcome.closeMenuOption()" ng-disabled="welcomeForm.$invalid" translate='common.save'></button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
