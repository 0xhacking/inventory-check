<div class="pstn-numbers">
  <div class="modal-header">
    <button type="button" class="close" ng-click="$dismiss()"><span class="sr-only" translate="common.close"></span></button>
    <h3 class="modal-title" translate="pstnSetup.setupNumbers"></h3>
  </div>
  <div class="flex-container">
    <section class="flex-2">
      <h4 translate="pstnSetup.orderBlock"></h4>
      <div class="modal-body">
        <form name="pstnNumbers.form" novalidate class="form">
          <formly-form model="pstnNumbers.model" fields="pstnNumbers.fields" form="pstnNumbers.form"></formly-form>
        </form>
      </div>
      <div class="modal-body" ng-if="pstnNumbers.searchResults.length > 0">
        <div class="provider-flex">
          <h5 translate="pstnSetup.searchResults"></h5>
          <button type="button" class="button info" ng-click="pstnNumbers.addToOrder()" cs-btn loading="pstnNumbers.addLoading" ng-disabled="pstnNumbers.addDisabled"><span translate="common.add"></span></button>
        </div>
        <ul class="small-block-grid-3 search-results">
          <li ng-repeat="searchResult in pstnNumbers.searchResults | startFrom: pstnNumbers.paginateOptions.currentPage*pstnNumbers.paginateOptions.pageSize | limitTo: pstnNumbers.paginateOptions.pageSize">
            <cs-checkbox ckid="searchResult{{$index}}" ng-model="pstnNumbers.searchResultsModel[$index]" label="{{::pstnNumbers.formatTelephoneNumber(searchResult)}}"></cs-checkbox>
          </li>
        </ul>
        <div class="provider-flex">
          <button type="button" class="circle-small secondary icon icon-chevron-left" ng-click="pstnNumbers.paginateOptions.previousPage()" ng-class="{invisible: pstnNumbers.paginateOptions.currentPage === 0}"><span class="sr-only" translate="common.back"></span></button>
          <button type="button" class="circle-small secondary icon icon-chevron-right" ng-click="pstnNumbers.paginateOptions.nextPage()" ng-class="{invisible: pstnNumbers.paginateOptions.currentPage >= pstnNumbers.searchResults.length/pstnNumbers.paginateOptions.pageSize - 1}"><span class="sr-only" translate="common.next"></span></button>
        </div>
      </div>
      <div class="modal-body" ng-if="pstnNumbers.searchResults.length === 0">
        <span class="h5" translate="pstnSetup.noSearchResults"></span>
      </div>
    </section>
    <section class="flex-1">
      <div class="provider-flex"><h4>{{::pstnNumbers.provider.title}}</h4><span class="badge">{{pstnNumbers.orderNumbersTotal}}</span></div>
      <ul class="list-group">
        <li class="list-group-item list-token" ng-repeat="order in pstnNumbers.orderCart">
          <span>{{::pstnNumbers.formatTelephoneNumber(order)}}</span><span ng-if="::pstnNumbers.isArray(order) && !pstnNumbers.isConsecutiveArray(order)">{{::'pstnSetup.quantity' | translate}} {{::order.length}}</span>
          <button type="button" class="close" ng-click="pstnNumbers.removeOrder(order)"><span class="sr-only" translate="common.delete"></span></button>
        </li>
      </ul>
    </section>
  </div>
  <div class="modal-footer">
    <button class="btn btn-default" ng-if="!pstnNumbers.hasCarriers()" ui-sref="pstnSetup" translate="common.back"></button>
    <button class="btn btn-primary" ng-click="pstnNumbers.goToReview()" translate="common.next"></button>
  </div>
</div>
