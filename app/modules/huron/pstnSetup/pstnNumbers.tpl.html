<div class="pstn-numbers">
  <div class="modal-header">
    <button type="button" class="close" ng-click="$dismiss()"><span class="sr-only" translate="common.close"></span></button>
    <h3 class="modal-title" translate="pstnSetup.setupNumbers"></h3>
  </div>
  <div class="flex-container">
    <section class="flex-2">
      <h4 translate="pstnSetup.orderBlock"></h4>
      <div class="modal-body">
        <form name="pstnSetup.form" novalidate class="form">
          <formly-form model="pstnSetup.model" fields="pstnSetup.fields" form="pstnSetup.form"></formly-form>
        </form>
      </div>
      <div class="modal-body" ng-if="pstnSetup.searchResults.length > 0">
        <div class="provider-flex">
          <h5 translate="pstnSetup.searchResults"></h5>
          <button type="button" class="button info" ng-click="pstnSetup.addToOrder()" cs-btn loading="pstnSetup.addLoading" ng-disabled="pstnSetup.addDisabled"><span translate="common.add"></span></button>
        </div>
        <ul class="small-block-grid-3 search-results">
          <li ng-repeat="searchResult in pstnSetup.searchResults | startFrom: pstnSetup.paginateOptions.currentPage*pstnSetup.paginateOptions.pageSize | limitTo: pstnSetup.paginateOptions.pageSize">
            <cs-checkbox ckid="searchResult{{$index}}" ng-model="pstnSetup.searchResultsModel[$index]" label="{{::pstnSetup.formatTelephoneNumber(searchResult)}}"></cs-checkbox>
          </li>
        </ul>
        <div class="provider-flex">
          <button ng-click="pstnSetup.paginateOptions.previousPage()" ng-class="{invisible: pstnSetup.paginateOptions.currentPage === 0}"><span translate="common.back"></span></button>
          <button ng-click="pstnSetup.paginateOptions.nextPage()" ng-class="{invisible: pstnSetup.paginateOptions.currentPage >= pstnSetup.searchResults.length/pstnSetup.paginateOptions.pageSize - 1}"><span translate="common.next"></span></button>
        </div>
      </div>
      <div class="modal-body" ng-if="pstnSetup.searchResults.length === 0">
        <span class="h5" translate="pstnSetup.noSearchResults"></span>
      </div>
    </section>
    <section class="flex-1">
      <div class="provider-flex"><h4>{{::pstnSetup.provider.title}}</h4><span class="badge">{{pstnSetup.orderNumbersTotal}}</span></div>
      <ul class="list-group">
        <li class="list-group-item list-token" ng-repeat="order in pstnSetup.orderCart">
          <span>{{::pstnSetup.formatTelephoneNumber(order)}}</span><span ng-if="::pstnSetup.isArray(order) && !pstnSetup.consecutiveResults">{{::'pstnSetup.quantity' | translate}} {{::order.length}}</span>
          <button type="button" class="close" ng-click="pstnSetup.removeOrder(order)"><span class="sr-only" translate="common.delete"></span></button>
        </li>
      </ul>
    </section>
  </div>
  <div class="modal-footer">
    <button class="btn btn-default" ng-if="!pstnSetup.hasCarriers" ui-sref="pstnSetup" translate="common.back"></button>
    <button class="btn btn-primary" ng-click="pstnSetup.orderNumbers()" translate="common.next"></button>
  </div>
</div>
