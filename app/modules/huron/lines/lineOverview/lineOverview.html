<form novalidate name="$ctrl.form" role="form">
  <cs-sp-buttons ng-show="$ctrl.form.$dirty" ng-init="$ctrl.initNewForm()">
    <button cs-btn loading="$ctrl.saveInProcess" class="btn btn--primary" ng-click="$ctrl.saveLineSettings()" ng-disabled="$ctrl.form.$invalid || $ctrl.saveDisabled() || $ctrl.saveInProcess" type="submit">
      <span translate="common.save"></span>
    </button>
    <button cs-btn ng-click="$ctrl.onCancel()">
      <span translate="common.cancel"></span>
    </button>
  </cs-sp-buttons>
  <cs-sp-container>
    <cs-sp-section>
      <section-title
        title-key="directoryNumberPanel.title">
      </section-title>
      <uc-directory-number
        show-internal-extensions="$ctrl.showExtensions"
        esn-prefix="$ctrl.esnPrefix"
        internal-selected="$ctrl.lineOverviewData.line.internal"
        internal-numbers="$ctrl.internalNumbers"
        internal-is-warn="$ctrl.internalIsWarn"
        internal-warn-msg="$ctrl.internalWarnMsg"
        external-selected="$ctrl.lineOverviewData.line.external"
        external-numbers="$ctrl.externalNumbers"
        on-change-fn="$ctrl.setDirectoryNumbers(internalNumber, externalNumber)">
      </uc-directory-number>
    </cs-sp-section>
    <cs-sp-section>
      <uc-call-forward
        call-forward-all="$ctrl.callForwardAll"
        call-forward-busy="$ctrl.callForwardBusy"
        voicemail-enabled="$ctrl.voicemailEnabled"
        on-change-fn="$ctrl.setCallForward(callForwardAll, callForwardBusy)">
      </uc-call-forward>
    </cs-sp-section>
    <div cr-feature-toggle feature-show="multipleCalls">
      <cs-sp-section >
        <uc-simultaneous-calls
          incoming-call-maximum="$ctrl.lineOverviewData.line.incomingCallMaximum"
          on-change-fn="$ctrl.setSimultaneousCalls(incomingCallMaximum)">
        </uc-simultaneous-calls>
      </cs-sp-section>
    </div>
    <cs-sp-section>
      <caller-id
        caller-id-options="$ctrl.callerIdOptions"
        custom-caller-id-name="$ctrl.customCallerIdName"
        custom-caller-id-number="$ctrl.customCallerIdNumber"
        caller-id-selected="$ctrl.callerIdSelected"
        on-change-fn="$ctrl.setCallerId(callerIdSelected, customCallerIdName, customCallerIdNumber);">
      </caller-id>
    </cs-sp-section>
    <cs-sp-section>
      <uc-shared-line
        selected-user="$ctrl.selectedUser"
        shared-line-users="$ctrl.sharedLineUsers"
        shared-line-endpoints="$ctrl.sharedLineEndpoints"
        select-shared-line-user-fn="$ctrl.selectSharedLineUser(user)"
        get-user-list-fn="$ctrl.getUserList(filter)"
        is-single-device-fn="$ctrl.isSingleDevice(sharedLineEndpoints, uuid)"
        disassociate-shared-line-user-fn="$ctrl.disassociateSharedLineUser(user, bulkDevice)">
      </uc-shared-line>
    </cs-sp-section>
  </cs-sp-container>
</form>
