<div class="helpdesk-app-container">
  <cs-header navstyle="" headertitle="{{'helpdesk.navHeaderTitle' | translate}}" icon="icon-cisco-logo">
    <cs-header-left>
    </cs-header-left>
    <cs-header-right>
      <div cs-dropdown class="user-info dropdown">
        <button cs-dropdown-toggle class="btn--user dropdown-toggle" tabindex="0">
          <div ng-class="{unknown:  'gray', error: 'red', ok: 'green'}[helpdeskCtrl.healthyStatus]">
            <i class="icon icon-circle"></i>
          </div>
        </button>
        <div cs-dropdown-menu class="helpdesk-spark-status-dropdown-menu" role="menu">
          <div class="header" >
            <b translate="helpdesk.sparkStatus"></b>&nbsp;&nbsp;&nbsp;&nbsp;
            <a ng-href="{{helpdeskCtrl.statusPageUrl}}" target="_blank">{{helpdeskCtrl.statusPageUrl}}</a>
          </div>
          <div class="content">
            <div ng-repeat="health in helpdeskCtrl.healthMetrics">
              <div ng-href="{{helpdeskCtrl.statusPageUrl}}" target="_blank">
                <div id="{{health.name}}" ng-class="{true:'green', false:'red'}[health.status==='operational']">
                  <i class="fa fa-circle"></i>&nbsp;&nbsp;
                  {{health.name}}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div cs-dropdown class="user-info dropdown">
        <button cs-dropdown-toggle class="btn--user dropdown-toggle" ng-click="helpdeskCtrl.populateHistory()" tabindex="0">
          <i class="icon icon-clock icon-history"></i>
        </button>
        <ul cs-dropdown-menu class="helpdesk-history-dropdown-menu" role="menu">
          <li ng-if="helpdeskCtrl.searchHistory.length <= 0">
	          <strong>{{'helpdesk.history.nohistory' | translate}}</strong>
          </li>
          <li ng-repeat="search in helpdeskCtrl.searchHistory track by $index" tabindex="{{$index + 1}}">
            <div class="search-result" ng-click="helpdeskCtrl.loadSearch(search)">
                <strong>{{search.searchString}}</strong>
              <div ng-if="search.userSearchResults.length + search.orgSearchResults.length + search.deviceSearchResults.length === 1">
                1 {{'helpdesk.history.singlematch' | translate}}
              </div>
              <div ng-if="search.userSearchResults.length + search.orgSearchResults.length + search.deviceSearchResults.length > 1">
                {{search.userSearchResults.length + search.orgSearchResults.length + search.deviceSearchResults.length}} {{'helpdesk.history.matches' | translate}}
              </div>
            </div>
          </li>
          <li ng-if="helpdeskCtrl.searchHistory.length > 0">
	        <div ng-click="helpdeskCtrl.clearSearchHistory()">
	         <span class="clear-history">{{'helpdesk.history.clear' | translate}}</span>
	        </div>
          </li>
        </ul>
      </div>

      <cr-user-info></cr-user-info>

    </cs-header-right>
  </cs-header>
  <div class="helpdesk-content-view" ui-view=""></div>
</div>
