<div class="notification"></div>
<div class="panel panel-default">
    <div class="panel-heading panel-heading-default">
      <div id="listLogs">
        <h3 class="panel-title panel-title-default">
          <strong id="subtitleLogs" translate="supportPage.subtitleLogs"></strong>
        </h3>
      </div>
    </div>

    <div class="panel-body">
      <form role="form">
        <div class="form-group">
          <br/>
          <input class="form-control support_input" type="text" id="logsearchfield" ng-model="input.search" placeholder=''/>
          <br>
       </div>

       <div class="form-group">
        <button id="logSearchBtn" class="btn btn-primary pull-right" ng-click="getLogs()" data-loading-text="<i class='icon icon-spinner icon-spin'></i>"><span translate="supportPage.listlogsbtn"></span></button>
      </div>
    </form>
  </div>
</div>

<div id="logs-panel" class="col-md-12 col-sm-12" ng-hide="callInfoActive">
    <div id="userSupport" class="customer-list">

      <div class="page-header row">
        <label ng-show="userLogs.length === 0 || !userLogs"><span id="noResults" translate="supportPage.noResults"></label>
        <div id="supportTable" gridscrollbar class="gridStyle col-md-12" ng-grid="gridOptions"></div>
      </div>

    </div>
  </div>

  <div class="panel panel-default call-info-panel" id="call-info-panel" ng-show="callInfoActive">
    <div class="panel-heading panel-heading-default">
      <div>
        <h3 class="panel-title panel-title-default">
          <strong id="subTitleCallInfo" translate="supportPage.subTitleCallInfo"></strong>
          <strong>{{emailAddress}}</strong>
        </h3>
      </div>
      <div  ng-click="closeCallInfo()">
        <span style="float: right"><i id='closeCallInfo' class="fa fa-times add-user-close"></i></span>
      </div>
    </div>
    <div class="panel-body">
      <label ng-show="!getPending && (logInfo.length === 0 || !logInfo)"><span id="noResults" translate="supportPage.noResults"></label>
      <div class="center" ng-show="getPending && (logInfo.length === 0 || !logInfo)">
        <i class='icon icon-spinner icon-spin'></i>
      </div>
      <table class="table" ng-show="logInfo.length !== 0">
        <thead>
          <tr>
            <th><span translate="supportPage.locusId"></span> : {{logInfo[0].locusId}}</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="info in logInfo">
            <td>
              <table class="table">
                <thead>
                  <tr>
                    <td><span translate="supportPage.locusCallStartTimeH"></span></td>
                    <td><span translate="supportPage.attributes"></span></td>
                    <td><span translate="supportPage.value"></span></td>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>{{info.locusCallStartTime}}</td>
                    <td><span translate="supportPage.userId"></span></td>
                    <td>
                      <a ng-click="downloadFlow(info.graphUserIdUrl)">
                          {{info.userId}}
                      </a>
                      <a href="{{info.graphUserIdUrl}}">
                          <i class="fa fa-download"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.emailAddress"></span></td>
                    <td>{{info.emailAddress}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.orgId"></span></td>
                    <td>{{info.orgId}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.locusId"></span></td>
                    <td>
                      <a ng-click="downloadFlow(info.graphLocusIdUrl)">
                          {{info.locusId}}
                      </a>
                      <a href="{{info.graphLocusIdUrl}}">
                          <i class="fa fa-download"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.locusCallStartTime"></span></td>
                    <td>{{info.locusCallStartTime}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.deviceId"></span></td>
                    <td>{{info.deviceId}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.isGroupCall"></span></td>
                    <td>{{info.isGroupCall}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.callDuration"></span></td>
                    <td>{{info.callDuration}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.userAgent"></span></td>
                    <td>{{info.usrAgent}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.networkName"></span></td>
                    <td>{{info.networkName}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.networkType"></span></td>
                    <td>{{info.networkType}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.trackingId"></span></td>
                    <td>
                      <a ng-click="downloadFlow(info.graphTrackingIdUrl)">
                          {{info.trackingId}}
                      </a>
                      <a href="{{info.graphTrackingIdUrl}}">
                          <i class="fa fa-download"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.audioStart"></span></td>
                    <td>{{info.audioStart}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.audioJitter"></span></td>
                    <td><span translate="supportPage.rx"></span> : {{info.audioRxJitter}} <span translate="supportPage.tx"></span> : {{info.audioTxJitter}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.audioLossRatio"></span></td>
                    <td><span translate="supportPage.rx"></span> : {{info.audioRxLossRatio}} <span translate="supportPage.tx"></span> : {{info.audioTxLossRatio}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.videoStart"></span></td>
                    <td>{{info.videoStart}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.videoJitter"></span></td>
                    <td><span translate="supportPage.rx"></span> : {{info.videoRxJitter}} <span translate="supportPage.tx"></span> : {{info.videoTxJitter}}</td>
                  </tr>
                  <tr>
                    <td></td>
                    <td><span translate="supportPage.videoLossRatio"></span></td>
                    <td><span translate="supportPage.rx"></span> : {{info.videoRxLossRatio}} <span translate="supportPage.tx"></span> : {{info.videoTxLossRatio}}</td>
                  </tr>
                  <tr ng-show="info.errorCode === 0">
                    <td></td>
                    <td><span translate="supportPage.errorCode"></span></td>
                    <td>0</td>
                  </tr>
                  <tr ng-show="info.errorCode === 1">
                    <td></td>
                    <td><span translate="supportPage.errorComponent"></span></td>
                    <td>{{info.component}}</td>
                  </tr>
                  <tr ng-show="info.errorCode === 1">
                    <td></td>
                    <td><span translate="supportPage.errorMessage"></span></td>
                    <td>{{info.errMessage}}</td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="panel panel-default call-info-panel" id="call-flow-panel" ng-show="callFlowActive">
    <div class="panel-heading panel-heading-default">
      <div>
        <h3 class="panel-title panel-title-default">
          <strong id="subTitleCallFlow" translate="supportPage.subTitleCallFlow"></strong>
        </h3>
      </div>
      <div  ng-click="closeCallFlow()">
        <span style="float: right"><i id='closeCallFlow' class="fa fa-times add-user-close"></i></span>
      </div>
    </div>
    <div class="panel-body">
      <a><img style="width: 100%" ng-src="{{callFlowUrl}}"></a>
    </div>
  </div>