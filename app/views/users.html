<div class="notification"></div>
<div ng-init="init()">
  <div class="panel panel-default">
    <div class="panel-heading panel-heading-default">
      <div id="addUsers">
        <h3 class="panel-title panel-title-default">
          <strong id="subTitleAdd" ng-show="isAddEnabled()" translate="usersPage.subTitleAdd"></strong>
          <strong id="subTitleEnable" ng-show="!isAddEnabled()" translate="usersPage.subTitleEnable"></strong>
        </h3>
      </div>
    </div>

    <div class="panel-body">
      <form role="form">
        <div class="form-group">
          <label for="inputEmail3" translate="usersPage.email"></label>
          <input class="form-control" type="text" id="usersfield" placeholder="Enter email addresses separated by commas or semi-colons" />
          <br>
          <div class="entitle-btn-grp">
            <div class="btn-group right" ng-repeat="(service, val) in entitlements" ng-if="service!='webExSquared'">
             <input type="checkbox" id="{{'btn_'+service}}" ng-model="entitlements[service]" icheck>
             <label style="font-size:15px; padding:5px">{{getServiceName(service)}}</label>
           </div>
         </div>
       </div>

       <div class="form-group">
        <div id="btnCancel" class="btn btn-link pull-right" ng-click="clearPanel()"><span translate="usersPage.clear"></span></div>
        <button id="btnAdd" class="btn btn-primary pull-right" ng-show="isAddEnabled()" ng-click="addUsers()" data-loading-text="<i class='fa fa-refresh fa-spin'></i>"><span translate="usersPage.add"></span></button>
        <button id="btnEntitle" class="btn btn-primary pull-right" ng-click="entitleUsers()" data-loading-text="<i class='fa fa-refresh fa-spin'></i>"><span translate="usersPage.update"></span></button>
      </div>
    </form>
  </div>
</div>


<div class="panel panel-default" ng-show="queryuserslist" id="userslistpanel" ng-controller="ListUsersCtrl">
  <div class="panel-heading panel-heading-default">
    <h3 class="panel-title panel-title-default">
      <strong> {{'usersPage.existingUsers' | translate}}</strong>
      <div id="export-btn" ng-csv="exportCSV()" filename="{{'usersPage.csvFilename' | translate}}" title="{{'usersPage.csvBtnTitle' | translate}}" class="btn" ng-disabled="exportBtn.disabled"><span id="export-icon"><i class="fa fa-file-text"></i></span></div>
    </h3>
  </div>
  <div class="panel-body">
    <table class="table">
      <thead>
        <tr>
          <th ng-click="setSort('name')" id="name-sort"><span translate="usersPage.nameHeader"></span> <i class="fa {{sort.icon.name}}"></i></th>
          <th ng-click="setSort('username')" id="username-sort"><span translate="usersPage.emailHeader"></span> <i class="fa {{sort.icon.username}}"></i></th>
          <th id="date-sort"><span translate="usersPage.addedHeader"></span> <i class="fa {{sort.icon.date}}"></i></th>
          <th><span translate="usersPage.statusHeader"></span></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="user in queryuserslist">
          <td><span ng-if="user.name">{{user.name.familyName}}, {{user.name.givenName}}</span></td>
          <td><a ng-click="showUserProfile(user)">{{user.userName}}</a></td>
          <td>N/A</td>
          <td class="btn-group"><span class="dropdown-toggle" data-toggle="dropdown">{{ getEntitlementState(user)? getStatus('active'):getStatus('inactive') }} <span class="caret"></span></span>
            <ul class="dropdown-menu" role="menu" >
              <li ng-click="changeEntitlement(user)"><a translate="usersPage.modify"></a></li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <div id="queryresults" value="{{queryuserslist.length}}" style="display: none;">{{queryuserslist.length}}</div>
    <ul class="pagination">
      <li><a id="prev-page" ng-click="pagination.prevPage();"><i class="fa fa-angle-left"></i></a></li>
      <li class="pagination-current"><a>{{page}}</a></li>
      <li><a id="next-page" ng-click="pagination.nextPage()"><i class="fa fa-angle-right"></i></a></li>
    </ul>
  </div>
</div>
